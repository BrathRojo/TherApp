
<div class="chat-container">
  <div *ngFor="let mensaje of mensajes">
    <strong>{{ mensaje.emisorNombre || 'Usuario' }}:</strong> {{ mensaje.contenido }}

    <!-- ✅ Mostrar imagen si el mensaje tiene un archivo adjunto y es una imagen -->
    <div *ngIf="mensaje.archivoUrl">
      <img *ngIf="mensaje.archivoUrl.endsWith('.jpg') || mensaje.archivoUrl.endsWith('.png') || mensaje.archivoUrl.endsWith('.jpeg')" 
           [src]="'http://localhost:9000/api/multimedia/files/' + mensaje.archivoUrl"
           width="200" alt="Imagen adjunta">

      <!-- ✅ Mostrar video si el mensaje tiene un archivo adjunto y es un video -->
      <video *ngIf="mensaje.archivoUrl.endsWith('.mp4') || mensaje.archivoUrl.endsWith('.mov')" controls width="200">
        <source [src]="'http://localhost:9000/api/multimedia/files/' + mensaje.archivoUrl" type="video/mp4">
      </video>

      <a [href]="'http://localhost:9000/api/multimedia/files/' + mensaje.archivoUrl"
         download
         target="_blank"
         rel="noopener noreferrer">
        <button>Descargar</button>
      </a>
    </div>
  </div>

  <div class="input-section">
    <textarea [(ngModel)]="nuevoMensaje" placeholder="Escribe un mensaje..."></textarea>

    <!-- ✅ Input para seleccionar un archivo -->
    <input type="file" (change)="seleccionarArchivo($event)">
    
    <button (click)="enviarMensaje()">Enviar</button>
  </div>
</div>