<app-header></app-header>

<div class="profile-container">
  <!-- Imagen de perfil con botón para cambiar -->
  <div class="profile-image-container" (click)="triggerInput()">
    <img [src]="foto" alt="Foto de perfil" class="profile-image">
    <button class="camera-button">
      <i class="bi bi-camera"></i>
    </button>
  </div>
  
  <input id="fotoInput" type="file" accept="image/*" (change)="onFileSelected($event)"/>

  <!-- Información del perfil -->
  <div class="profile-info">
    <p><span>Usuario:</span> {{ nombreUsuario }}</p>
    <p><span>Nombre:</span> {{ nombre }}</p>
    <p><span>Email:</span> {{ email }}</p>
    <p><span>Teléfono:</span> {{ telefono }}</p>
    <p><span>Fecha de Nacimiento:</span> {{ fechaNacimiento | date }}</p>
    <p><span>Biografía:</span> {{ biografia }}</p>
    <p><span>Ubicación:</span> {{ ubicacion }}</p>
  </div>

  <!-- Botón para abrir el modal de edición -->
  <button class="btn-edit" (click)="abrirModal()">Editar</button>

  <!-- Botones de cambio de cuenta -->
  <div class="account-buttons">
    <a routerLink="/cambioCuenta/terapeuta" class="btn-switch terapeuta">
      <i class="bi bi-person-fill"></i> Cambiar a terapeuta
    </a>

    <a routerLink="/cambioCuenta/organizacion" class="btn-switch organizacion">
      <i class="bi bi-building"></i> Cambiar a organización
    </a>
  </div>
</div>

<app-publicacion></app-publicacion>

<!-- MODAL PARA EDITAR PERFIL -->
<div class="modal fade" id="editarPerfilModal" tabindex="-1" aria-labelledby="editarPerfilLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="editarPerfilLabel">Editar Perfil</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form>
          <div class="mb-3">
            <label class="form-label">Nombre:</label>
            <input type="text" class="form-control" [(ngModel)]="nombre" name="nombre">
          </div>
          <div class="mb-3">
            <label class="form-label">Email:</label>
            <input type="email" class="form-control" [(ngModel)]="email" name="email">
          </div>
          <div class="mb-3">
            <label class="form-label">Teléfono:</label>
            <input type="text" class="form-control" [(ngModel)]="telefono" name="telefono">
          </div>
          <div class="mb-3">
            <label class="form-label">Fecha de Nacimiento:</label>
            <input type="date" class="form-control" [(ngModel)]="fechaNacimiento" name="fechaNacimiento">
          </div>
          <div class="mb-3">
            <label class="form-label">Biografía:</label>
            <textarea class="form-control" [(ngModel)]="biografia" name="biografia"></textarea>
          </div>
          <div class="mb-3">
            <label class="form-label">Ubicación:</label>
            <input type="text" class="form-control" [(ngModel)]="ubicacion" name="ubicacion">
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
        <button type="button" class="btn btn-primary" (click)="actualizarPerfil()">Guardar Cambios</button>
      </div>
    </div>
  </div>
</div>
